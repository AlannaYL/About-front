import{Q as b,a as u}from"./QForm.77ae0701.js";import{H as p,ar as f,m as d,q as i,d as l,J as r,s as c,F as y,al as V,ag as Q,x,Q as k}from"./index.ce5bf077.js";import{a as v,Q as I}from"./QImg.e2e3b97a.js";import{Q as h}from"./QCheckbox.f681b1aa.js";import{Q as w}from"./QCard.10172644.js";import{u as q}from"./use-quasar.b9a44da6.js";import"./use-key-composition.b7664e18.js";import"./use-dark.b05c8d3d.js";import"./QChip.67d223a0.js";import"./format.3e32b8d9.js";const F={class:"row",id:"Admin-about"},A=c("h4",{class:"text-center col-12"},"\u95DC\u65BC\u6211\u5011",-1),B={class:"row"},C=c("p",null,"\u5716\u7247\u9810\u89BD",-1),U={key:0,class:"absolute-full flex flex-center"},G={__name:"AboutsPage",setup(N){const m=q(),n=p([]),a=p({content:"",images:[],delImages:[],description:""}),g=async()=>{var t,s;const o=new FormData;o.append("content",a.content);for(const e of a.images)o.append("images",e);for(const e of a.delImages)o.append("delImages",e);o.append("description",a.description);try{const{data:e}=await f.patch("/abouts/",o);n[a]=e.result,m.notify({message:"\u7DE8\u8F2F\u6210\u529F",color:"pink"})}catch(e){m.notify({message:"\u64CD\u4F5C\u5931\u6557",caption:((s=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:s.message)||"\u767C\u751F\u932F\u8AA4",color:"pink"})}};return(async()=>{var o,t;try{const{data:s}=await f.get("/abouts/");n.push(...s.result),console.log(n),a.content=n[0].content,a.images=n[0].images,a.delImages=[],a.description=n[0].description}catch(s){m.notify({message:"\u53D6\u5F97\u5931\u6557",caption:((t=(o=s==null?void 0:s.response)==null?void 0:o.data)==null?void 0:t.message)||"\u767C\u751F\u932F\u8AA4",color:"pink"})}})(),(o,t)=>(d(),i("div",F,[A,l(w,{class:"col-6 margin-auto"},{default:r(()=>[l(b,{class:"q-pa-md",onSubmit:g},{default:r(()=>{var s;return[l(u,{class:"q-mb-md",modelValue:a.content,"onUpdate:modelValue":t[0]||(t[0]=e=>a.content=e),type:"textarea",label:"\u8ACB\u8F38\u5165\u7B2C\u4E00\u6BB5\u5167\u5BB9",filled:""},null,8,["modelValue"]),l(u,{modelValue:a.description,"onUpdate:modelValue":t[1]||(t[1]=e=>a.description=e),type:"textarea",label:"\u8ACB\u8F38\u5165\u7B2C\u4E8C\u6BB5\u5167\u5BB9",filled:""},null,8,["modelValue"]),c("div",B,[C,(d(!0),i(y,null,V((s=n[a])==null?void 0:s.images,e=>(d(),i("div",{class:"col-12",key:e},[l(v,{class:"full-width",src:e},{default:r(()=>[a.delImages.includes(e)?(d(),i("div",U,[l(Q,{name:"delete"})])):x("",!0)]),_:2},1032,["src"]),l(h,{modelValue:a.delImages,"onUpdate:modelValue":t[2]||(t[2]=_=>a.delImages=_),val:e},null,8,["modelValue","val"])]))),128))]),l(I,{class:"col-12 q-mb-md",modelValue:a.images,"onUpdate:modelValue":t[3]||(t[3]=e=>a.images=e),filled:"","stack-label":"",label:"\u9078\u64C7\u5167\u5BB9\u5716\u7247",multiple:""},null,8,["modelValue","label"]),l(k,{class:"q-my-lg",label:"\u7DE8\u8F2F\u95DC\u65BC\u6211\u5011",type:"submit",push:"",rounded:"",color:"pink"})]}),_:1})]),_:1})]))}};export{G as default};
